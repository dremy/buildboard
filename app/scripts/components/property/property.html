<div class="container-full">
  <nav class="row breadcrumb-nav">
    <div class="nav-wrapper">
      <div class="col s12"> 
          <a
            ui-sref="portfolio()"
            class="breadcrumb">Portfolio</a>
          <a 
            ui-sref= "property({id: property.details._id})" 
            class="breadcrumb">
            <!--TO DO - Precrop and serve from Filestack -->
            <img 
            ng-cloak
            class="breacrumb-thumb"
            height="32"
            width="32"
            alt="{{property.details.title}}"
            title="{{property.details.title}}"
            ng-src="{{property.details.images[0]}}" /> <span>{{property.details.title}}</span>
          </a>
      </div> 
    </div>
  </nav>
</div>
<div
  class="container container-first container-wide property" 
  bb-active-menu="" 
  bb-active-title="">
  <!--<div class="row">
    <a class="btn blue float-right"
      ui-sref="propertyEditForm({pid: property.details._id})">Edit Property</a>
  </div>-->
  <div class="row">
    <div class="col s12">
      <a
        href="#!"
        data-activates="slide-out"
        class="side-nav-tab button-collapse">
        <i class="material-icons white-text">menu</i>
      </a>
      <ul id="slide-out" class="side-nav">
        <li>
          <div class="userView">
            <img class="background" ng-src="{{property.details.images[0]}}">
            <a ui-sref="property({pid:board.property._id, '#': 'overview'})"><div class="circle"></div></a>
            <a ui-sref="property({pid:board.property._id, '#': 'overview'})"><span class="white-text name">{{property.details.location.address}}</span></a>
            <a ui-sref="property({pid:board.property._id, '#': 'overview'})"><span class="white-text email">{{property.details.location.city}}, {{property.details.location.state}} {{property.details.location.zip}}</span></a>
          </div>
        </li>
        <li>
          <a ui-sref="property({pid:board.property._id, '#': 'overview'})">Overview</a>
        </li>
        <li>
          <div class="divider"></div>
        </li>
        <li>
          <a 
            ui-sref="property({pid:board.property._id, '#': 'details'})"><span class="glyphicon glyphicon-list-alt" aria-hidden="true"></span> Details</a>
        </li>
        <li>
          <a ui-sref="property({pid:board.property._id, '#': 'photos'})"><span class="glyphicon glyphicon-picture" aria-hidden="true"></span> Photos</a>
        </li>
        <li>
          <a ui-sref="property({pid:board.property._id, '#': 'team'})"><span class="glyphicon glyphicon-user" aria-hidden="true"></span> Team
          </a>
        </li>
        <li>
          <a ui-sref="property({pid:board.property._id, '#': 'boards'})"><span class="glyphicon glyphicon-pushpin" aria-hidden="true"></span> Boards</a>
        </li>
      </ul>
    </div>
  </div>
  <div class="row" ng-cloak>
    <div class="col s12">
      <ul 
        class="collapsible"
        data-collapsible="accordion">
        <li 
          class="details"
          name="details"
          id="details">
          <div class="collapsible-header active grey lighten-3"><span class="glyphicon glyphicon-list-alt" aria-hidden="true"></span>   <strong>Details</strong>
          </div>
          <div class="collapsible-body">
            <div class="row">
              <h1>{{property.details.location.address}}</h1>
              <h2>{{property.details.location.city}}, {{property.details.location.state}} {{property.detail.location.zip}}</h2>
              <div 
                class="col s12 l4" 
                ng-show="property.details.price">
                <label>Purchase Price</label>
                <p>{{property.details.price | currency:"$":0}}</p>
              </div>
              <div 
                class="col s12 l4 center"
                ng-show="property.details.bedrooms">
                <label>Bedrooms</label>
                <p class="bedrooms fact">{{property.details.bedrooms}}</p>
              </div>
              <div
                class="col s12 l4 center"
                ng-show="property.details.bathrooms">
                <label>Bathrooms</label>
                <p class="bathrooms fact">{{property.details.bathrooms | number}}</p>
              </div>
            </div>
          </div>
        </li>
      </ul>
      <ul
        class="collapsible"
        data-collapsible="accordion">
        <li 
          class="photos"
          name="photos"
          id="photos">
          <div class="collapsible-header grey lighten-3">
            <span class="glyphicon glyphicon-picture" aria-hidden="true"></span>   <strong>Photos</strong>
          </div>
          <div class="collapsible-body">
            <div class="row">
              <img
                ng-repeat="image in property.details.images" 
                materialboxed
                ng-cloak
                ng-class="{l6:$first}"
                class="col s12 m6 l3 materialboxed responsive-img"
                width="400"
                ng-src="{{image}}"
                data-caption="Photo #{{$index+1}} | {{property.details.title}}"
                alt="Photo #{{$index+1}} | {{property.details.title}}"
                title="Photo #{{$index+1}} | {{property.details.title}}"/>
            </div>
          </div>
        </li>
      </ul>
      <ul
        class="collapsible"
        data-collapsible="accordion">
        <li 
          class="team"
          name="team"
          id="team">
          <div class="collapsible-header grey lighten-3">
            <span class="glyphicon glyphicon-user" aria-hidden="true"></span>   <strong>Team</strong>
          </div>
          <div class="collapsible-body">
            <div class="row">
            </div>
          </div>
        </li>
      </ul>
      <ul
        class="collapsible"
        data-collapsible="accordion">
        <li 
          class="boards"
          name="boards"
          id="boards">
          <div class="collapsible-header grey lighten-3">
            <span class="glyphicon glyphicon-pushpin" aria-hidden="true"></span>   <strong>Boards</strong>
          </div>
          <div class="collapsible-body">
            <div class="row">
              <div class="col l4 m6 s12 item">
                <button
                  class="add-card" 
                  ui-sref="add.board">
                  <div class="card card-add center-align">
                    <span class="glyphicon glyphicon-plus"></span>
                    <div class="card-content">
                      <p>Add Board</p>
                    </div>
                  </div>
                </button>
              </div>
              <div 
                ng-repeat="board in property.boards"
                class="col l4 m6 s12 item">
                <a ui-sref="board({pid:property.details._id, bid: board._id})">
                  <div class="card">
                    <div class="card-image">
                      <img ng-src="{{board._files[0].url | fpConvert: {filter:'crop[dim:0,0,255,262]', w:255} }}" />
                      <span class="card-title">{{board.title}}</span>
                      <span 
                        class="card-subtitle"
                        ng-if="board._tags.length > 0">
                        <span 
                          class="glyphicon glyphicon-tag" 
                          aria-hidden="true"></span>
                        <span 
                          ng-repeat="tag in board._tags | limitTo:3">{{tag.tag}}</span>
                      </span>
                    </div>
                  </div>
                </a>
              </div>
            </div>
          </div>
        </li>
      </ul>
    </div>
  </div>
</div>
<div class="container-full">
  <ng-map
    ng-cloak
    id="property-map"
    zoom="14"
    scrollwheel="false"
    center="{{property.details.location.formatted}}"
    geo-fallback-center="current-location">
    <marker
      position="{{property.details.location.formatted}}"
      animation="Animation.BOUNCE"
      title="{{property.details.location.formatted}}"
      centered="true">
    </marker>    
  </ng-map>
</div>